Date: June 30, 2024 9:00 PM
1. Commented the last part (OJS brand images in footer seciton) of the file /var/www/html/ojs/plugins/themes/default/styles/
Outcome: Footer of homepage did not change.

2. Changed the footer.tlp file in /var/www/html/ojs/lib/pkp/templates/frontend/components/.
Commented out line 40,41,42 that is for the PKP/OSJ logo. 
From Journal Administration (logged in as admin) -> Administrative Functions -> Clear Template Cache
Next Added some text and inline styling in line 39 and 40 (new)
Output: PKP logo GONE. (Success)
b) Next copied code from DU website's footer with all the css classes and pasted it in the footer.tlp file.
c) Magic!! Footer changed completely.

Date: July 1, 2024
3. Making a field mendatory (e.g. Orcid ID)
a) In file lib/pkp/templates/common/userDetails.tpl in Line 110 after id="orcid" add required="true"
b) In file lib/pkp/templates/controllers/grid/users/author/form in Line 61 make 'required' to 'optional'
in the line $this->addCheck(new FormValidator($this, ‘orcid’, ‘required’, ‘user.orcid.orcidInvalid’));

4. Install and Apply child theme for individual journals
a) As Journal Admin, from left menu, Go to Website -> Plugins and install the Manuscript (Default child theme)
[if not installed yet]
b) From the Installed Plugins Enable Manuscript (Default child theme)
c) Refresh the webpage
d) from Appearance Tab -> Theme , select Manuscript (Default child theme)
e) Save

5. Justifying Abstract
a) Have created a new .css file with the following content

.obj_article_details .abstract, 
.obj_article_details .item > :last-child {
	text-align: justify;
}
b) Have saved the file and uploaded the css from Website -> Appearance -> Advanced -> Journal Stylesheet.

6. To make the "Journal Summary" section appear on the top of homepage of individual journals
a) Edit the file /var/www/html/ojs/templates/frontend/pages/indexJournal.tpl
b) Add the following lines after the line {call_hook name="Templates::Index::journal"}
	{if $currentContext}
			<div class="about_journal">
			<h1>{$currentContext->getLocalizedName()}</h1>
			{$journalDescription|strip_unsafe_html}
			</div>
		{/if}
c) Save and upload. We are done. 

7. To make the number of times a paper has been viewed and downloaded.
a) For OJS version 3.3.0.17 add the following function in the file /var/www/html/ojs/classes/submission/Submission.inc.php
	(At the end) (Source: https://forum.pkp.sfu.ca/t/how-to-display-article-views-and-pdf-download-counts-on-journal-website/88697/5)
	public function getDownloads()
    {
        $filters = [
            'dateStart' => StatisticsHelper::STATISTICS_EARLIEST_DATE,
            'dateEnd' => date('Y-m-d', strtotime('yesterday')),
            'contextIds' => [$this->getData('contextId')],
            'submissionIds' => [$this->getId()],
            'assocTypes' => [Application::ASSOC_TYPE_SUBMISSION_FILE],
        ];
        $metrics = Services::get('publicationStats')
            ->getQueryBuilder($filters)
            ->getSum([])
            ->value('metric');
        return $metrics ? $metrics : 0;
    }
b) Included the following line in file /var/www/html/ojs/templates/frontend/objects/galley_link.tpl (for including download counter)
	(At the end of the file, before the final </a> tag)
	{assign var=galleys value=$article->getGalleys()}
		{if $galleys}
			{foreach from=$galleys item=galley name=galleyList} 
				<sup><i class="fa fa-download"> </i> {$galley->getViews()} </sup>
			{/foreach} 
		{/if}
c) Included the following line in file /var/www/html/ojs/templates/frontend/objects/article_summary.tpl (for including download counter)
	(Around line 80. after the lines {if !$hideGalleys} <ul class="galleys_links">)
	<li><span class="cmp_button_wire"><i class="fa fa-eye"></i> 
			{$article->getViews()}
			</span<</li>

8. Adding Social Media Icons
a) Install the plugin Sharrif.
b) In Website->Appearance you will find a new Menu called "Shariff Plugin". Select the icons you want to display
and also the location where to display (footer, sidebar, publication page), how to display (vertical, horizontal) etc.
If you choose sidebar, then from Website -> Appearance -> Setup check "Sharrif Block Plugin" from Sidebar menu. 
c) Save. You are done.
*In my case, the icons were coming but the text and logs of the social media were not coming. It was a 
conflict with one of the css I used for the footer of our site. I changed the css and everything worked fine.

9. Assigning DOI to papers and issues
a) In Settings -> Journal -> Masthead, fill up the "Publication Details"
b) In the 'CrossRef XML Export Plugin', I used Depositor Name 'AFJ Manager' and email 'afj-manager@du.ac.bd'
c) In the 'CrossRef XML Export Plugin', I have given the username and password of my crossref account
d) In the 'CrossRef XML Export Plugin', checked 'OJS will deposit assigned DOI ....' and Saved.
e) Installed the DOI pluging
f) In the settings of DOI plugin, checked 'Article', Provided DOI Prefix (obtained from crossref).
g)  In the settings of DOI plugin, chose the first Radio as DOI Prefix
h) In the settings of DOI plugin, Clicked "Assign DOIs" at the bottom.
i) Saved. It worked!!

10. Repare the Register and Login pages
a) Due to our footer css, the registration and login page field labels became invisible.
b) Added a css as 'site style css' to repair this damage.
c) Crated a new file called journal-site.css with the following content:
.cmp_form .label {
    display: block;
    font-size: 100 px;
    font-weight: 400;
    font-style: italic;
    color: black;
    text-align: left;
}
d) Uploaded it to Adminstration -> Site Settings -> Appearance -> Setup -> 'Site Style Sheet'
e) Done !!

11. Adding Custom blocks (e.g. Blocks with downloadable files on sidebar)
a) Install plugin 'Custom Block Manager'
b) Then from plugin settings called 'Custom Block Manager', click 'Add Block'
c) Give name of the block and put contents that needs to be in the block. It is possible to add hyperlinks
that can be used for adding downloadables.
d) From Website -> Appearance -> Setup -> Sidebar make sure to make the custom block checked.
e) Done.

12. Adding Site-wide Search cmp_button
a) Open file /var/www/html/ojs/templates/frontend/pages/indexSite.tpl
b) Added the lines after <div class="page_index_site"> [Line 14]
	<div style="float: right;">
	<a href="https://journals.du.ac.bd/index.php/index/search" class="pkp_search pkp_search_desktop">
		<span class="fa fa-search" aria-hidden="true"></span>
		<b>Search in DU Journals</b>
	</a>
</div>
<div><br></div>
c) Search button appeared immediately below Page Banner.
d) Not fully satistifed, as I wanted to put it in the page banner.
e) But Happy with the result!!

13. Enforcing email varification
a) In line 394 of config.inc.php set require_validation from Off to On.
d) Done.

14. Adding 'phone' field in the registration form and making it mendatory field
a) edit the file /var/www/html/ojs/lib/pkp/classes/user/form/RegistrationForm.inc.php. 
   i) modify the function readInputData() and add a new key 'phone' for the associative array $this->readUserVars(array(
	after 'reviewerGroup'.
	ii) Add the following line in the section "Set the base user fields (name, etc.)"
	$user->setPhone($this->getData(‘phone’));
b) edit the file lib/pkp/templates/frontend/components/registrationForm.tpl
	i) Say, we will add it before the 'Country' field. So, we shall add the following lines before “<div class=”country”>”  lines.
	ii) 
		<div class=”form-group phone”>
			<label>
			<span class=”label”>
				{translate key=”user.phone”}
				<span class=”form-control-required”>*</span>
				<span class=”sr-only”>{translate key=”common.required”}</span>
			</span>
				<input class=”form-control” type=”text” name=”phone” id=”phone” value=”{$phone|escape}” required>
			</label>
		</div>
	c) Done. However, what I could not do is force the users who are already registered to input their 
	phone numbers after next login. 
	
